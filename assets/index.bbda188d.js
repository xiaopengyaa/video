import{W as $,X as x,U as w,I as b,_ as E,G as L}from"./http.1a6e57db.js";import{d as g,b as C,u as e,h as D,i as R,D as A,A as H,B as U,j as s,_ as I,U as q,q as j,a as l,o as z,E as G,s as M,w as N,z as P,y as m,T as V,c as h,t as k,v as F,x as O,G as W}from"./index.1a655784.js";const X=t=>(H("data-v-faacd632"),t=t(),U(),t),Y={key:0,class:"loading-skeleton"},J=X(()=>s("div",{class:"text loading-skeleton--animate"},"xiaopengyaa\u89C6\u9891",-1)),K=[J],Q=g({__name:"loading-skeleton",props:{loading:{type:Boolean}},setup(t){const a=t,n=$(C(()=>a.loading),x);return(i,c)=>e(n)?(D(),R("div",Y,K)):A(i.$slots,"default",{key:1},void 0,!0)}});const Z=I(Q,[["__scopeId","data-v-faacd632"]]);async function ee(t){return await w.get("/detail/getDetail",{url:t})}async function te(t){return await w.get("/detail/getPlaylist",{cid:t})}function ae(){return{introduction:{area_name:"",cover_description:"",detail_info:"",episode_all:"",hotval:"",main_genres:"",title:"",update_notify_desc:"",year:""},topList:[],videoInfo:{c_covers:"",c_title_output:"",pioneer_tag:"",title:"",type:0,type_name:"",vid:""}}}function se(t){const a=q(),n=j(),i=l(ae()),c=l(""),u=l([]),o=l(!1);z(async()=>{a.query.url||_(),o.value=!0,Promise.all([ee(a.query.url),te(t.value)]).then(([d,f])=>{i.value=d,u.value=f,c.value=i.value.videoInfo.vid,o.value=!1}).catch(()=>{o.value=!1})});function _(){n.push("/")}function r(d){n.replace({path:"/detail",query:{...a.query,url:d.href}})}return{detailData:i,playlist:u,active:c,loading:o,toHome:_,handleClick:r}}const oe={class:"detail"},ne=["src"],ie={class:"detail__content"},le={class:"detail__title"},ce={class:"title"},de=["innerHTML"],ue={class:"detail__play"},_e={class:"update"},re={class:"update__title"},pe={class:"update__desc"},fe=g({name:"detail"}),ve=g({...fe,setup(t){G(p=>({60575815:e(B)}));const a=q(),n=l(""),i=l(""),c=l(""),u=l();M(()=>{n.value=`https://okjx.cc/?url=${a.query.url}`,i.value=a.query.cid,c.value=a.query.series});const{detailData:o,playlist:_,active:r,loading:d,toHome:f,handleClick:S}=se(i),B=C(()=>["okjx.cc"].some(y=>n.value.includes(y))?"50px":"20px");return N(d,()=>{setTimeout(()=>{var p;(p=u.value)==null||p.scrollToActive()},x+100)}),(p,v)=>{const y=b;return D(),P(V,null,{default:m(()=>[s("div",oe,[h(y,{class:"detail__back",color:"#fff",size:e(L)(20),name:"arrow-left",onClick:e(f)},null,8,["size","onClick"]),s("iframe",{class:"detail__video",allowtransparency:"true",frameborder:"0",scrolling:"no",allowfullscreen:"true",autoplay:"true",src:n.value},null,8,ne),h(Z,{loading:e(d)},{default:m(()=>[s("div",ie,[s("div",le,[s("div",ce,k(e(o).introduction.title),1),s("div",{class:"info",innerHTML:e(o).introduction.detail_info},null,8,de)]),s("div",ue,[s("div",_e,[F(s("div",re," \u5267\u96C6\u4E0E\u66F4\u65B0 ",512),[[O,e(o).introduction.update_notify_desc||e(_).length]]),s("div",pe,k(e(o).introduction.update_notify_desc),1)]),h(E,{ref_key:"playlistRef",ref:u,active:e(r),"onUpdate:active":v[0]||(v[0]=T=>W(r)?r.value=T:null),list:e(_),series:c.value,"show-active":"",onClick:e(S)},null,8,["active","list","series","onClick"])])])]),_:1},8,["loading"])])]),_:1})}}});const ge=I(ve,[["__scopeId","data-v-3e10de5f"]]);export{ge as default};
